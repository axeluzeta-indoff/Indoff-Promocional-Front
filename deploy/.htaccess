# Activa motor de reescritura
RewriteEngine On
RewriteBase /

# 1) Fuerza HTTPS
# Si alguien llega con http:// se redirige a https://
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# 2) Fuerza dominio sin "www"
# Redirige https://www.indoffpro.com → https://indoffpro.com
RewriteCond %{HTTP_HOST} ^www\.indoffpro\.com$ [NC]
RewriteRule ^(.*)$ https://indoffpro.com/$1 [L,R=301]

# 3) Excepciones: no tocar robots.txt ni sitemap.xml
RewriteRule ^(robots\.txt|sitemap\.xml)$ - [L]

# 4) Bloquear acceso a archivos/carpetas heredadas
# Evita que Google intente indexar rutas viejas del hosting anterior
RewriteRule ^(index\.php|cgi-bin/.*)$ - [F,L]

# 5) Si el recurso existe como archivo o directorio, sírvelo directamente
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 6) Fallback de SPA (React/Vite build)
# Todas las rutas internas → index.html
RewriteRule ^ index.html [L]

# 7) Asegurar MIME correcto para XML
# Para que GSC no diga "Couldn't fetch"
AddType application/xml .xml
